<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Manager</title>
    <meta
      name="description"
      content="A python based Password Manager made using Flet & Fernet."
    />
    <link rel="icon" type="image/x-icon" href="/images/icon.webp" />
    <link
      href="//fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
    />
    <link
      href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i"
      rel="preconnect stylesheet"
    />
    <link
      href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700%7CRoboto:400,500,600,700%7C&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese&amp;display=swap"
      rel="preconnect stylesheet"
      crossorigin=""
    />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="menubar"></div>
    <div class="main">
      <div class="download_frame_parent">
        <div class="download_frame">
          <p class="download_title">
            Download an open source password manager today.
          </p>
          <button
            style="font-family: monospace"
            id="download_button"
            class="download_button"
          >
            Download
          </button>
        </div>
      </div>
      <h2 class="subheading"><strong>About the project:</strong></h2>
      <img class="profile_pic" src="images/intercept.webp" alt="profile_pic" />
      <h2 class="subheading">Intercept</h2>
      <p class="txt">
        This program was made using Python (flet & fernet) & the website was
        made using HTML, CSS and JavaScript. You can contact me on the contact
        page
        <a href="contact" class="link">here.</a>
      </p>
    </div>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="main.js" async defer></script>
    <script>
      const userAgent = navigator.userAgent;
      const downloadButton = document.getElementById("download_button");
      const tooltipText = document.querySelector(".tooltip-text");
      document.addEventListener("DOMContentLoaded", function () {
        if (
          !userAgent.indexOf("Windows") !== -1 ||
          !userAgent.indexOf("Android") !== -1
        ) {
        }
        if (
          (!userAgent.indexOf("iPhone") !== -1 &&
            !userAgent.indexOf("Android") !== -1 &&
            userAgent.indexOf("Windows") !== -1) ||
          userAgent.indexOf("Mac OS X") !== -1 ||
          userAgent.indexOf("X11") !== -1 ||
          userAgent.indexOf("Wayland") !== -1
        ) {
          downloadButton.addEventListener("click", function () {
            let downloadUrl =
              "https://github.com/passmgrgui/passmgr/raw/binaries/linux/passmgrgui.zip";
            let os = "Unix";

            if (userAgent.indexOf("Mac OS X") !== -1) {
              downloadUrl =
                "https://github.com/passmgrgui/passmgr/raw/binaries/macos/passmgrgui.zip";
              os = "Mac";
            } else if (userAgent.indexOf("Windows") !== -1) {
              downloadUrl =
                "https://github.com/passmgrgui/passmgr/raw/binaries/windows/passmgrguisetup.exe";
              os = "Windows";
            }

            window.location.href = downloadUrl;
            setTimeout(function () {
              window.location.href = `nextsteps?os=${os}`;
            }, 1000);
          });
        } else {
          downloadButton.style.opacity = 0.3;
          downloadButton.style.backgroundColor = "grey";
          downloadButton.title =
            "Password Manager is currently only supported on desktop UNIX or DOS devices. Please refer to the source code.";
        }
      });
    </script>
  </body>
</html>
