<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanks for downloading!</title>
    <meta
      name="description"
      content="A python based Password Manager made using Flet & Fernet."
    />
    <link rel="icon" type="image/x-icon" href="/images/icon.webp" />
    <link
      href="//fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
    />
    <link
      href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i"
      rel="preconnect stylesheet"
    />
    <link
      href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700%7CRoboto:400,500,600,700%7C&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese&amp;display=swap"
      rel="preconnect stylesheet"
      crossorigin=""
    />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="menubar"></div>
    <div class="main">
      <h1 class="title">Thanks for downloading!</h1>
      <p class="txt" style="display: none"></p>
      <p class="subheading" id="commandLabel1">COMMAND 1</p>
      <pre
        class="commandsHolder"
        style="display: none"
      ><code class="command1"></code></pre>
      <p class="subheading" id="commandLabel2">COMMAND 2</p>
      <pre
        class="commandsHolder2"
        style="display: none"
      ><code class="command2"></code></pre>
      <pre
        class="unixOsCommandsHolder"
        style="display: none"
      ><code class="unixOsCommand"></code></pre>
    </div>
    <script src="https://code.jquery.com/jquery-1.10.2.js" async defer></script>
    <script src="main.js" defer></script>
    <script>
      function parseURLParams() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        return params;
      }

      // Get the URL parameters
      const params = parseURLParams();

      // Check if the required parameters exist
      if ("os" in params) {
        const os = params.os;

        // Do something with the parameters
        if (os == "Windows" || os == "Unix" || os == "Mac") {
          const stepsLeft = document.querySelector(".txt");
          const command1 = document.querySelector(".command1");
          const command2 = document.querySelector(".command2");
          const commandsHolder = document.querySelector(".commandsHolder");
          const commandsHolder2 = document.querySelector(".commandsHolder2");
          const commandLabel1 = document.querySelector("#commandLabel1");
          const commandLabel2 = document.querySelector("#commandLabel2");

          if (os == "Unix") {
            // Use querySelector to select the first element with the class "steps"
            stepsLeft.style.display = "block";
            stepsLeft.textContent =
              "Currently, only Windows has an executable file that can be run without dependencies. Follow the steps below to install the dependencies. Afterwards, to install, simply extract the ZIP file & run the .bin file using your DE or terminal.";
            commandsHolder.style.display = "block";
            commandsHolder2.style.display = "block";
            command1.textContent = "pip3 install cryptography flet pyperclip";
            command2.textContent = "./passmgrgui.bin";
          } else if (os == "Windows") {
            stepsLeft.style.display = "block";
            stepsLeft.textContent =
              "To install, simply run the installer executable, either by right clicking > Open or double clicking the file. The installer will guide you.";
            commandsHolder.style.display = "block";
            commandsHolder2.style.display = "block";
            command1.textContent = "Run the installer executable.";
            command2.textContent =
              "The installer will guide you through the next steps.";
            commandLabel1.textContent = "STEP 1";
            commandLabel2.textContent = "STEP 2";
          } else if (os == "Mac") {
            stepsLeft.style.display = "block";
            stepsLeft.textContent =
              "Currently, only Windows has an executable file that can be run without dependencies. Follow the steps below to install the dependencies. Afterwards, to install, simply extract the ZIP file & run the python file using python3 passmgrgui.py or Finder.";
            commandsHolder.style.display = "block";
            commandsHolder2.style.display = "block";
            command1.textContent =
              "brew update && brew upgrade && brew install python3 && pip3 install cryptography flet pyperclip";
            command2.textContent = "python3 passmgrgui.py";
          }
        } else {
          alert("Invalid operating system");
        }
      } else {
        alert("Invalid or missing parameters");
      }
    </script>
  </body>
</html>
